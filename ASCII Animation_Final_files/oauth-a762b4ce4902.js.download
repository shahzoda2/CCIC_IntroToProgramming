"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["oauth"],{65935(a,b,c){c.d(b,{AC:()=>j,rK:()=>i,uT:()=>h});class ErrorWithResponse extends Error{constructor(a,b){super(a),this.response=b}}function d(){let a,b,c=new Promise(function(c,d){a=c,b=d});return[c,a,b]}let e,f=[],g=[];function h(a){f.push(a)}function i(a){g.push(a)}function j(a,b){e||(e=new Map,document.addEventListener("submit",k));let c=e.get(a)||[];e.set(a,[...c,b])}function k(a){if(!(a.target instanceof HTMLFormElement)||a.defaultPrevented)return;let b=a.target,c=function(a){let b=[];for(let c of e.keys())if(a.matches(c)){let d=e.get(c)||[];b.push(...d)}return b}(b);if(0===c.length)return;let h=m(b),[i,j,k]=d();a.preventDefault(),l(c,b,h,i).then(async a=>{if(a){for(let c of g)await c(b);n(h).then(j,k).catch(()=>{}).then(()=>{for(let a of f)a(b)})}else b.submit()},a=>{b.submit(),setTimeout(()=>{throw a})})}async function l(a,b,c,e){let f=!1;for(let g of a){let[h,i]=d(),j=()=>(f=!0,i(),e),k={text:j,json:()=>(c.headers.set("Accept","application/json"),j()),html:()=>(c.headers.set("Accept","text/html"),j())};await Promise.race([h,g(b,k,c)])}return f}function m(a){let b={method:a.method||"GET",url:a.action,headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),body:null};if("GET"===b.method.toUpperCase()){let c=function(a){let b=new URLSearchParams,c=new FormData(a).entries();for(let[d,e]of[...c])b.append(d,e.toString());return b.toString()}(a);c&&(b.url+=(~b.url.indexOf("?")?"&":"?")+c)}else b.body=new FormData(a);return b}async function n(a){let b=await window.fetch(a.url,{method:a.method,body:null!==a.body?a.body:void 0,headers:a.headers,credentials:"same-origin"}),c={url:b.url,status:b.status,statusText:b.statusText,headers:b.headers,text:"",get json(){let d=this,e=JSON.parse(d.text);return delete d.json,d.json=e,d.json},get html(){let f=this;return delete f.html,f.html=function(a,b){let c=a.createElement("template");return c.innerHTML=b,a.importNode(c.content,!0)}(document,f.text),f.html}},g=await b.text();if(c.text=g,b.ok)return c;throw new ErrorWithResponse("request failed",c)}},47773(a,b,c){var d=c(64463),e=c(65935);async function f(a){var b;await (b=document,new Promise(function(a){function c(){b.hasFocus()&&(a(),b.removeEventListener("visibilitychange",c),window.removeEventListener("focus",c),window.removeEventListener("blur",c))}b.addEventListener("visibilitychange",c),window.addEventListener("focus",c),window.addEventListener("blur",c),c()})),await new Promise(a=>setTimeout(a,1e3)),a instanceof HTMLButtonElement&&(a.disabled=!1)}function g(a){a.preventDefault()}async function h(a){a.addEventListener("click",g),a.classList.add("color-fg-muted"),await new Promise(a=>setTimeout(a,3e3)),a.classList.remove("color-fg-muted"),a.removeEventListener("click",g)}(0,d.N7)("#js-oauth-authorize-btn",a=>{f(a)}),(0,d.N7)("#js-manual-authorize-redirect",a=>{h(a)}),(0,e.AC)(".js-toggler-container .js-set-approval-state",async function(a,b){let c=a.closest(".js-toggler-container");c.classList.add("loading");let d=await b.json();"approved"===d.json.approval_state?c.classList.add("on"):"denied"===d.json.approval_state&&(c.classList.add("revoked"),c.classList.remove("on")),c.classList.remove("loading")}),(0,e.AC)(".js-request-access-approval-form",async function(a,b){await b.text();let c=a.getAttribute("data-container-id");document.querySelector(`#${c}`).classList.add("on")})}},a=>{var b=b=>a(a.s=b);a.O(0,["vendors-node_modules_selector-observer_dist_index_esm_js"],()=>b(47773));var c=a.O()}])
//# sourceMappingURL=oauth-028012c02d69.js.map